# Exit (자유를 찾아서) - Android 앱 기획서

## 1. 앱 개요

### 1.1 앱 소개
"자유를 찾아서"는 조기 은퇴(FIRE: Financial Independence, Retire Early)를 목표로 하는 사용자들을 위한 자산 관리 및 은퇴 계획 앱입니다.

### 1.2 핵심 가치
- 사용자의 은퇴까지 남은 시간(D-Day)을 실시간 계산
- 몬테카를로 시뮬레이션을 통한 은퇴 성공 확률 분석
- 월별 입금 및 패시브 인컴 기록 관리
- 직관적인 다크 테마 UI/UX

---

## 2. 주요 기능

### 2.1 온보딩 (Onboarding)
1. **환영 화면**: 앱 소개 및 시작 버튼
2. **3단계 정보 입력**:
   - 희망 월 현금흐름 (은퇴 후 필요한 월 수입)
   - 현재 순자산 (투자 가능 자산)
   - 월 평균 저축·투자 금액

### 2.2 대시보드 (Dashboard)
- **D-Day 표시**: 은퇴까지 남은 기간 (롤링 애니메이션)
- **진행률 링 차트**: 현재 자산 / 목표 자산 비율
- **계산 상세 정보**: 
  - 목표 자산 = (희망 월수입 × 12) ÷ (은퇴후 수익률 - 물가상승률)
  - 월복리 시뮬레이션으로 D-Day 계산
- **인라인 설정 조정**: 헤더를 당겨서 설정 변경 가능

### 2.3 시뮬레이션 (Simulation)
- **몬테카를로 시뮬레이션**: 30,000회 시뮬레이션으로 은퇴 성공 확률 계산
- **은퇴 전 시뮬레이션**: 목표 자산 도달까지 예상 기간
- **은퇴 후 시뮬레이션**: 자산 소진 시점 예측
- **차트 시각화**:
  - 확률 분포 히스토그램
  - 자산 경로 차트 (행운/평균/불운 시나리오)
  - 퍼센타일 정보

### 2.4 기록 (Record)
- **연도별 입금 기록**: 월별 입금 현황 조회
- **5가지 입금 카테고리**:
  - 월급/보너스
  - 배당금
  - 이자 수입
  - 월세/임대료
  - 기타 입금
- **통계 대시보드**: 총 입금액, 패시브 인컴, 계획 달성도
- **막대 차트**: 월별 입금 추이 시각화

### 2.5 설정 (Settings)
- **공지사항**: 앱 업데이트 및 안내
- **입금 알람**: 반복 알람 설정 (매일/매주/매월)
- **문의하기**: 이메일, 인스타그램 연동
- **데이터 관리**: 전체 데이터 초기화

---

## 3. 데이터 모델

### 3.1 UserProfile (사용자 프로필)
```kotlin
data class UserProfile(
    val id: UUID,
    val desiredMonthlyIncome: Double,      // 희망 월 수입
    val currentNetAssets: Double,           // 현재 순자산
    val monthlyInvestment: Double,          // 월 투자금
    val preRetirementReturnRate: Double,    // 은퇴 전 수익률 (기본 6.5%)
    val postRetirementReturnRate: Double,   // 은퇴 후 수익률 (기본 5.0%)
    val inflationRate: Double,              // 물가상승률 (기본 2.5%)
    val hasCompletedOnboarding: Boolean,
    val createdAt: Date,
    val updatedAt: Date
)
```

### 3.2 Asset (현재 자산)
```kotlin
data class Asset(
    val id: UUID,
    val amount: Double,
    val createdAt: Date,
    val updatedAt: Date
)
```

### 3.3 AssetSnapshot (자산 스냅샷)
```kotlin
data class AssetSnapshot(
    val id: UUID,
    val yearMonth: String,  // "yyyyMM" 형식
    val amount: Double,
    val snapshotDate: Date
)
```

### 3.4 MonthlyUpdate (월별 업데이트)
```kotlin
data class MonthlyUpdate(
    val id: UUID,
    val yearMonth: String,
    val salaryAmount: Double,      // 월급/보너스
    val dividendAmount: Double,    // 배당금
    val interestAmount: Double,    // 이자
    val rentAmount: Double,        // 월세
    val otherAmount: Double,       // 기타
    val totalAssets: Double,
    val depositDate: Date,
    val recordedAt: Date
)
```

### 3.5 DepositReminder (입금 알람)
```kotlin
data class DepositReminder(
    val id: UUID,
    val name: String,
    val repeatType: RepeatType,
    val dayOfMonth: Int?,
    val dayOfWeek: Int?,
    val time: Date,
    val isEnabled: Boolean,
    val createdAt: Date,
    val updatedAt: Date
)

enum class RepeatType {
    ONCE, DAILY, WEEKLY, MONTHLY
}
```

### 3.6 Announcement (공지사항)
```kotlin
data class Announcement(
    val id: String,
    val title: String,
    val content: String,
    val type: AnnouncementType,
    val isImportant: Boolean,
    val publishedAt: Date,
    val version: String?,
    val linkURL: String?
)

enum class AnnouncementType {
    NOTICE, UPDATE, EVENT, TIP
}
```

---

## 4. 비즈니스 로직

### 4.1 RetirementCalculator (은퇴 계산기)
- **목표 자산 계산**: `필요자산 = (월수입 × 12) ÷ 실질수익률`
- **D-Day 계산**: 월복리 시뮬레이션으로 목표 도달 개월 수 계산
- **필요 수익률 역산**: 현재 자산으로 희망 수입을 얻기 위한 최소 수익률

### 4.2 MonteCarloSimulator (몬테카를로 시뮬레이터)
- **확률적 시뮬레이션**: 로그정규분포 기반 수익률 샘플링
- **Box-Muller 변환**: 정규분포 난수 생성
- **대표 경로 추출**: 10%, 50%, 90% 퍼센타일 경로
- **변동성 자동 계산**: 목표 수익률에 따른 변동성 매핑

### 4.3 RetirementSimulator (은퇴 후 시뮬레이터)
- **자산 소진 시뮬레이션**: 은퇴 후 40년간 자산 변화 예측
- **5개 시나리오**: 매우 행운(10%), 행운(30%), 평균(50%), 불행(70%), 매우 불행(90%)
- **단기/장기 분석**: 10년 및 40년 기준 분석

---

## 5. 디자인 시스템

### 5.1 색상 (Colors)
```kotlin
// 배경
val background = Color(0xFF0A0A0A)
val cardBackground = Color(0xFF121212)
val secondaryCardBackground = Color(0xFF1A1A1A)

// 텍스트
val primaryText = Color.White
val secondaryText = Color(0xFFA0A0A0)
val tertiaryText = Color(0xFF666666)

// 액센트
val accent = Color(0xFF00D4AA)       // 청록
val warning = Color(0xFFFF3B30)       // 빨강
val caution = Color(0xFFFF9500)       // 주황
val positive = Color(0xFF34C759)      // 초록

// 기타
val divider = Color(0xFF2A2A2A)
val disabledBackground = Color(0xFF333333)
```

### 5.2 타이포그래피 (Typography)
```kotlin
// 제목
largeTitle: 42sp, Heavy
title: 32sp, Bold
title2: 24sp, SemiBold
title3: 20sp, SemiBold

// 본문
body: 18sp, Medium
subheadline: 16sp, Regular
caption: 14sp, Regular
caption2: 12sp, Regular

// 숫자
scoreDisplay: 96sp, Heavy, Monospace
numberDisplay: 42sp, Heavy, Monospace
number: 24sp, SemiBold, Monospace
keypad: 28sp, Medium
```

### 5.3 스페이싱 & 라운딩
```kotlin
// Spacing
xs = 4.dp
sm = 8.dp
md = 16.dp
lg = 24.dp
xl = 32.dp
xxl = 48.dp

// Corner Radius
sm = 8.dp
md = 12.dp
lg = 16.dp
xl = 24.dp
full = 9999.dp
```

### 5.4 그라데이션
```kotlin
// 액센트 그라데이션
exitAccent = linearGradient(Color(0xFF00D4AA), Color(0xFF00B894))

// 카드 배경
exitCard = linearGradient(Color(0xFF1A1A1A), Color(0xFF121212))
```

---

## 6. 기술 스택 (Android)

### 6.1 필수 라이브러리
- **UI**: Jetpack Compose
- **상태 관리**: ViewModel + StateFlow
- **로컬 DB**: Room
- **의존성 주입**: Hilt
- **비동기**: Kotlin Coroutines + Flow
- **차트**: Vico Charts
- **날짜**: java.time (ThreeTenABP)
- **JSON 파싱**: Kotlinx Serialization

### 6.2 아키텍처
```
app/
├── data/
│   ├── local/
│   │   ├── dao/
│   │   ├── entity/
│   │   └── database/
│   ├── repository/
│   └── datastore/
├── domain/
│   ├── model/
│   ├── usecase/
│   └── repository/
├── presentation/
│   ├── ui/
│   │   ├── theme/
│   │   ├── components/
│   │   ├── onboarding/
│   │   ├── dashboard/
│   │   ├── simulation/
│   │   ├── record/
│   │   └── settings/
│   ├── viewmodel/
│   └── navigation/
├── di/
└── util/
```

---

## 7. 개발 순서 및 진행 현황

### Phase 1: 기초 설정 ✅ 완료
1. ✅ Jetpack Compose 프로젝트 설정
2. ✅ 의존성 추가 (Room, Hilt, Navigation Compose 등)
3. ✅ 디자인 시스템 구현 (Theme, Colors, Typography)

### Phase 2: 비즈니스 로직 ✅ 완료
1. ✅ 데이터 모델 정의 (Domain + Entity)
2. ✅ Room Database 및 DAO 구현
3. ✅ Repository 패턴 구현
4. ✅ UseCase 구현 (RetirementCalculator, MonteCarloSimulator, RetirementSimulator)

### Phase 3: 상태 관리 ✅ 완료
1. ✅ AppStateViewModel 구현
2. ✅ OnboardingViewModel 구현
3. ✅ SimulationViewModel 구현

### Phase 4: UI 구현 ✅ 완료
1. ✅ 공통 컴포넌트 (CustomNumberKeyboard, ProgressRing, ExitButton)
2. ✅ 온보딩 화면 (WelcomeScreen, OnboardingScreen)
3. ✅ 대시보드 화면 (DashboardScreen)
4. ✅ 시뮬레이션 화면 (SimulationScreen)
5. ✅ 설정 화면 (SettingsScreen)
6. ⏳ 기록 화면 (RecordScreen) - 추가 개발 필요

### Phase 5: 부가 기능 ⏳ 예정
1. ⏳ 알림 기능 (WorkManager)
2. ⏳ 햅틱 피드백
3. ⏳ 고급 애니메이션 효과
4. ⏳ 차트 구현 (Vico Charts)

---

## 8. iOS → Android 매핑

| iOS | Android |
|-----|---------|
| SwiftUI | Jetpack Compose |
| SwiftData | Room Database |
| @Observable | StateFlow / MutableStateFlow |
| @Environment | CompositionLocal / Hilt |
| NavigationStack | NavHost / Navigation Compose |
| UIImpactFeedbackGenerator | VibrationEffect |
| UserDefaults | DataStore |
| UNUserNotificationCenter | NotificationManager + WorkManager |
| Charts (Swift Charts) | Vico / MPAndroidChart |

---

## 9. 참고 사항

### 9.1 핵심 수식
```
목표 자산 = (희망 월수입 × 12) ÷ (은퇴후 수익률 - 물가상승률)

예시:
- 희망 월수입: 300만원
- 은퇴후 수익률: 5%
- 물가상승률: 2.5%
- 목표 자산 = (300만 × 12) ÷ 0.025 = 14.4억원
```

### 9.2 변동성 매핑 테이블
| 수익률 | 변동성 |
|--------|--------|
| < 2.5% | 1% |
| 2.5-4% | 4.5% |
| 4-6% | 7% |
| 6-7% | 11% |
| 7-8% | 13% |
| 8-9% | 15% |
| 9-10% | 17% |
| 10-12% | 21% |
| 12-15% | 27% |
| 15-20% | 30% |
| > 20% | 35% |

